(this["webpackJsonpchat-room"]=this["webpackJsonpchat-room"]||[]).push([[0],{117:function(n,e,t){"use strict";t.r(e);var a=t(0),c=t.n(a),i=t(27),o=t.n(i),s=(t(81),t(21)),r=t.p+"static/media/logo.6ce24c58.svg",d=(t(82),t(135)),l=t(134),b=t.p+"static/media/logo.b303fac2.png",m=t(22),j=t(2);var h,p,u,x=function(){var n=Object(a.useState)(),e=Object(s.a)(n,2),t=e[0],c=e[1];return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)("img",{src:r,className:"App-logo",alt:"logo"}),Object(j.jsx)("p",{children:"Welcome To Chat Room!"}),Object(j.jsxs)("div",{className:"mb-2 flex items-center",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name\uff1a"}),Object(j.jsx)(d.a,{id:"name",onChange:function(n){c((function(e){return n.target.value}))}})]}),t?Object(j.jsx)(l.a,{variant:"contained",children:Object(j.jsx)(m.b,{to:{pathname:"/chat-room",state:{name:t}},children:"Entry"})}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)("img",{className:"mt-2",src:b,alt:"Logo",width:"200"})]})})},g=t(49),f=t(41),O=t(4),v=t(42),w=t(68),N=t.n(w),k=t(136),y=t.p+"static/media/defaultUser.9b757a8e.png",S=t(69),C=t.n(S),B=v.a.div(h||(h=Object(f.a)(["\n  background-color: #282c34;\n  height: 100vh;\n  color: #fff;\n  overflow: hidden;\n  padding-bottom: 40px;\n"]))),D=v.a.div(p||(p=Object(f.a)(['\n  height: 100%;\n  overflow: auto;\n  ul {\n    display: flex;\n    padding: 10px;\n  }\n  .msgBox {\n    .profile {\n      margin: 2px;\n      width: 50px;\n      height: 50px;\n      background-color: #fff;\n      border-radius: 50%;\n      overflow: hidden;\n      .img {\n        width: 100%;\n        height: 100%;\n        display: inline-block;\n        object-fit: contain;\n      }\n    }\n    .body {\n      position: relative;\n      padding-left: 5px;\n      .name {\n        font-size: 12px;\n      }\n      .msg {\n        background-color: #7d7d7d;\n        border-radius: 10px;\n        padding: 5px;\n        font-size: 14px;\n        margin-left: 8px;\n        position: relative;\n        &:after {\n          content: "";\n          display: inline-block;\n          position: absolute;\n          width: 0;\n          height: 0;\n          border-style: solid;\n          border-width: 6.5px 12px 6.5px 0;\n          border-color: transparent #7d7d7d transparent transparent;\n          left: -10px;\n          top: 12px;\n        }\n      }\n    }\n    .date {\n      font-size: 12px;\n      display: flex;\n      align-items: flex-end;\n      padding-left: 5px;\n      color: #bdbdbd;\n    }\n    &-user {\n      ul {\n        flex-direction: row-reverse;\n      }\n      .body {\n        padding-right: 5px;\n        .name {\n          text-align: right;\n        }\n        .msg {\n          margin-right: 8px;\n          background-color: #27a55c;\n          &:after {\n            border-width: 6.5px 0 6.5px 12px;\n            border-color: transparent transparent transparent #27a55c;\n            left: auto;\n            right: -10px;\n            top: 12px;\n          }\n        }\n      }\n    }\n    &-announcement {\n      text-align: center;\n      padding: 5px;\n      > div {\n        padding: 10px;\n        background-color: #a0a0a059;\n        display: inline-block;\n        border-radius: 50px;\n        font-size: 14px;\n      }\n    }\n  }\n']))),F=v.a.div(u||(u=Object(f.a)(["\n  color: #000;\n  height: 40px;\n  width: 100%;\n  position: fixed;\n  bottom: 0;\n  background-color: #fff;\n  input {\n    width: 80%;\n  }\n  .buttonDiv {\n    width: 10%;\n    display: inline-block;\n    padding: 0 5px;\n  }\n  button {\n    width: 100%;\n  }\n  * {\n    height: 100%;\n  }\n"]))),E=function(){var n=Object(O.g)(),e=Object(O.f)(),t=Object(a.useState)(!1),c=Object(s.a)(t,2),i=c[0],o=c[1],r=Object(a.useState)(null),d=Object(s.a)(r,2),b=d[0],h=d[1],p=Object(a.useState)([]),u=Object(s.a)(p,2),x=u[0],f=u[1],v=Object(a.useState)(null),w=Object(s.a)(v,2),S=w[0],E=w[1],M=Object(a.useState)(""),z=Object(s.a)(M,2),A=z[0],L=z[1];Object(a.useEffect)((function(){b&&(console.log("success connect!"),T())}),[b]);var T=function(){var e=Object(k.a)();console.log(x),E((function(n){return e})),b&&(b.emit("joinChatRoom",{id:e,name:n.state.name}),b.on("getAllMessage",(function(n){console.log("\u8a0a\u606f\u4e8b\u4ef6:",n);var e=n.id,t=n.name,a=n.message,c=n.date;f((function(n){return[].concat(Object(g.a)(n),[{message:a,crated:e,name:t,date:c}])}))})),b.on("announcement",(function(n){console.log("\u516c\u544a\u4e8b\u4ef6:",n);var e=n.message,t=n.crated,a=n.name;f((function(n){return[].concat(Object(g.a)(n),[{message:e,crated:t,name:a,date:null}])}))})))};return Object(a.useEffect)((function(){n.state&&n.state.name||e.push("/"),o((function(n){return!0}));var t=N()("https://react-chat-room-v1.herokuapp.com/",{transports:["websocket"]});return setTimeout((function(){h(t),o((function(n){return!1}))}),2e3),function(){b&&b.emit("exitChatRoom",{id:S,name:n.state.name}),t.close()}}),[]),Object(j.jsxs)(B,{children:[Object(j.jsx)("div",{className:"text-center p-4",children:Object(j.jsxs)("h2",{children:[i?"Loading...":"Welcome ".concat(n.state&&n.state.name?n.state.name:"unknow"," \ud83d\ude04"),S]})}),Object(j.jsx)(D,{children:x.map((function(n,e){return"announcement"===n.name?Object(j.jsx)("div",{className:"msgBox-announcement",children:Object(j.jsx)("div",{children:n.message})}):Object(j.jsx)("div",{className:"".concat(n.crated===S?"msgBox-user":"msgBox-others"," msgBox"),children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{className:"profile",children:Object(j.jsx)("img",{className:"img",src:y,alt:"User Profile"})}),Object(j.jsxs)("li",{className:"body",children:[Object(j.jsx)("div",{className:"name",children:n.name}),Object(j.jsx)("div",{className:"msg",children:n.message})]}),Object(j.jsx)("li",{className:"date",children:n.date})]})},e)}))}),Object(j.jsxs)(F,{children:[Object(j.jsx)("input",{className:"w-100",type:"text",placeholder:"Write Something...",onChange:function(n){L((function(e){return n.target.value}))},value:A}),Object(j.jsx)("div",{className:"buttonDiv",children:Object(j.jsx)(l.a,{variant:"contained",onClick:function(){A&&!i&&(b&&b.emit("sendMessage",{id:S,name:n.state.name,message:A,date:C()().format("YYYY-MM-DD HH:mm:ss")}),L((function(n){return""})))},children:"Submit"})}),Object(j.jsx)("div",{className:"buttonDiv",children:Object(j.jsx)(l.a,{variant:"contained",children:Object(j.jsx)(m.b,{to:{pathname:"/"},children:"Exit"})})})]})]})},M=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,137)).then((function(e){var t=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,o=e.getTTFB;t(n),a(n),c(n),i(n),o(n)}))};o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(m.a,{basename:"/react-chat-room-v1",children:Object(j.jsxs)(O.c,{children:[Object(j.jsx)(O.a,{path:"/",exact:!0,children:Object(j.jsx)(x,{})}),Object(j.jsx)(O.a,{path:"/chat-room",exact:!0,children:Object(j.jsx)(E,{})})]})})}),document.getElementById("root")),M()},81:function(n,e,t){},82:function(n,e,t){}},[[117,1,2]]]);
//# sourceMappingURL=main.290ebe6f.chunk.js.map